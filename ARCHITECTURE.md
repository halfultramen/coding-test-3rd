# System Architecture

```text
┌─────────────────────────────────────────────────────────────┐
│                        Frontend (Next.js)                   │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │  Fund Page   │  │   Upload     │  │ Dashboard /  │     │
│  │  Selection   │  │    PDF       │  │ Transactions │     │
│  └──────────────┘  └──────────────┘  └──────────────┘     │
└────────────────────────┬────────────────────────────────────┘
                         │ REST API
┌────────────────────────▼────────────────────────────────────┐
│                    Backend (FastAPI)                        │
│  ┌─────────────────────────────────────────────────────┐   │
│  │              Document Processor                     │   │
│  │  ┌──────────────┐         ┌──────────────┐        │   │
│  │  │   PDF Parser │────────▶│ Table Extractor│       │   │
│  │  └──────────────┘         └──────┬───────┘        │   │
│  │                               ┌──▼───┐             │   │
│  │  ┌──────────────┐         ┌──▶│ Vector│           │   │
│  │  │ Text Chunker │────────▶│   │ Store │           │   │
│  │  └──────────────┘         │   └──────┘           │   │
│  │                             │ .faiss & .pkl      │   │
│  │                             ▼                     │   │
│  │                   ┌─────────────────┐             │   │
│  │                   │ PostgreSQL DB   │             │   │
│  │                   │  (Transactions,│             │   │
│  │                   │   Fund info)   │             │   │
│  │                   └─────────────────┘             │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                              │
│  ┌─────────────────────────────────────────────────────┐   │
│  │              Query Engine (RAG + LLM)               │   │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────┐ │   │
│  │  │   Intent     │─▶│   Vector     │─▶│   LLM    │ │   │
│  │  │ Classifier   │  │   Search     │  │ Response │ │   │
│  │  └──────────────┘  └──────────────┘  └──────────┘ │   │
│  │                                                      │   │
│  │  ┌──────────────┐  ┌──────────────┐               │   │
│  │  │ Metrics      │─▶│   SQL        │               │   │
│  │  │ Calculator   │  │  Queries     │               │   │
│  │  └──────────────┘  └──────────────┘               │   │
│  └─────────────────────────────────────────────────────┘   │
└────────────────────────┬────────────────────────────────────┘
                         │
        ┌────────────────┼────────────────┐
        │                │                │
┌───────▼────────┐ ┌─────▼─────┐ ┌────────▼────────┐
│   PostgreSQL   │ │  FAISS    │ │     Redis       │
│  (Fund &       │ │ (Vectors) │ │  (Task Queue)   │
│ Transactions)  │ │ .faiss/.pkl│ │                 │
└────────────────┘ └───────────┘ └─────────────────┘
